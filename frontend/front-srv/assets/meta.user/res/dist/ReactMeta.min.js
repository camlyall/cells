(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Callbacks:()=>a,InfoPanel:()=>tr,MetaClient:()=>b,Renderer:()=>Dt,TypeEditor:()=>qr,UserMetaDialog:()=>dr,UserMetaPanel:()=>zt});const r=require("pydio");var n=e.n(r);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===o(i)?i:String(i)),n)}var i}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"editMeta",value:function(){var e=n().getInstance();e.UI.openComponentInModal("ReactMeta","UserMetaDialog",{dialogTitleId:489,selection:e.getUserSelection()})}}],null&&i(t.prototype,null),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const u=require("react");var l=e.n(u);const c=require("material-ui"),s=require("pydio/http/api");var f=e.n(s);const p=require("cells-sdk");function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===y(o)?o:String(o)),n)}var o}var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=f().getRestClient()}var t,r,n;return t=e,n=[{key:"getInstance",value:function(){return e.Instance||(e.Instance=new e),e.Instance}}],(r=[{key:"saveMeta",value:function(e,t){var r=this,n=new p.UserMetaServiceApi(this.client);return new Promise((function(o,i){r.loadConfigs().then((function(r){var a=[];e.map((function(e){var o=new p.IdmUpdateUserMetaRequest;o.MetaDatas=[],o.Operation="PUT",r.forEach((function(r,n){if(t.has(n)){var i=new p.IdmUserMeta;i.NodeUuid=e.getMetadata().get("uuid"),i.Namespace=n,i.JsonValue=JSON.stringify(t.get(n)),i.Policies=[p.ServiceResourcePolicy.constructFromObject({Action:"READ",Subject:"*",Effect:"allow"}),p.ServiceResourcePolicy.constructFromObject({Action:"WRITE",Subject:"*",Effect:"allow"})],o.MetaDatas.push(i)}})),a.push(n.updateUserMeta(o))})),Promise.all(a).then((function(){o()})).catch((function(e){i(e)}))}))}))}},{key:"clearConfigs",value:function(){this.configs=null}},{key:"loadConfigs",value:function(){var e=this;return this.configs?Promise.resolve(this.configs):(this.promise||(this.promise=new Promise((function(t){var r={},n=new Map;new p.UserMetaServiceApi(e.client).listUserMetaNamespace().then((function(o){o.Namespaces.map((function(e){var t=e.Namespace,n={label:e.Label,indexable:e.Indexable,order:e.Order,visible:!0,readonly:!e.PoliciesContextEditable};if(e.JsonDefinition){var o=JSON.parse(e.JsonDefinition);Object.keys(o).map((function(e){"hide"===e?n.visible=!o[e]:n[e]=o[e]}))}r[t]=n}));var i=Object.entries(r).map((function(e){return e[1].ns=e[0],e[1]}));i.sort((function(e,t){var r=e.order||0,n=t.order||0;return r>n?1:r===n?0:-1})),i.map((function(e){if("choice"===e.type&&e.data&&e.data.split){var t=e.data.split(",").map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.split("|"),2);return{key:t[0],value:t[1]}}));e.data={items:t}}n.set(e.ns,e)})),e.configs=n,t(n),e.promise=null})).catch((function(){t(new Map),e.promise=null}))}))),this.promise)}},{key:"listTags",value:function(e){var t=this;return new Promise((function(r){new p.UserMetaServiceApi(t.client).listUserMetaTags(e).then((function(e){e.Tags?r(e.Tags):r([])})).catch((function(e){r([])}))}))}},{key:"createTag",value:function(e,t){return new p.UserMetaServiceApi(this.client).putUserMetaTag(e,p.RestPutUserMetaTagRequest.constructFromObject({Namespace:e,Tag:t}))}}])&&m(t.prototype,r),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===v(o)?o:String(o)),n)}var o}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function j(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(u,t);var r,n,o,i,a=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(o);if(i){var r=w(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={value:t.props.value||0,configs:t.props.configs||new Map,getRealValue:function(){var e=t.props,r=e.node,n=e.column;return r.getMetadata().get(n.name)}},t}return r=u,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.configs||b.getInstance().loadConfigs().then((function(t){e.setState({configs:t})}))}},{key:"render",value:function(){return l().createElement(e,h({},this.props,this.state))}}])&&g(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}(l().Component)}function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==S(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===S(o)?o:String(o)),n)}var o}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}var k={fontSize:20,color:"#FBC02D",marginTop:6,marginBottom:6};const x=j(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(n);if(o){var r=T(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this.props,t=e.getRealValue,r=e.size,n=t()||0,o=[0,1,2,3,4].map((function(e){return l().createElement("span",{key:"star-"+e,className:"mdi mdi-star"+(n>e?"":"-outline")})})),i="small"===r?{color:k.color}:k;return l().createElement("span",{style:i},o)}}])&&P(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(l().Component));function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==C(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===C(o)?o:String(o)),n)}var o}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}const D=j(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(n);if(o){var r=_(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e,t=this.props,r=t.configs,n=t.getRealValue,o=t.column,i=n(),a=n(),u=r.get(o.name);if(u&&u.data&&u.data.items){var c=u.data.items.filter((function(e){return e.key===i}));c.length&&(a=c[0].value,c[0].color&&(e=l().createElement("span",{className:"mdi mdi-label",style:{color:c[0].color,marginRight:5}})))}return l().createElement("span",null,e,a)}}])&&M(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(l().Component));function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==I(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===I(o)?o:String(o)),n)}var o}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var V=function(){var e=n().getMessages();return{low:{label:e["meta.user.4"],sortValue:"5",color:"#66c"},todo:{label:e["meta.user.5"],sortValue:"4",color:"#69c"},personal:{label:e["meta.user.6"],sortValue:"3",color:"#6c6"},work:{label:e["meta.user.7"],sortValue:"2",color:"#c96"},important:{label:e["meta.user.8"],sortValue:"1",color:"#c66"}}};const L=j(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(n);if(o){var r=A(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=(0,this.props.getRealValue)(),t=V();if(e&&t[e]){var r=t[e];return l().createElement("span",null,l().createElement("span",{className:"mdi mdi-label",style:{color:r.color}})," ",r.label)}return l().createElement("span",null,e)}}])&&N(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(l().Component)),F=require("color");var U=e.n(F),q={};function W(e){if(0===e.length)return{};if(q[e])return q[e];var t,r,n=0;for(t=0,r=e.length;t<r;t++)n=(n<<5)-n+1e3*e.charCodeAt(t),n|=0;var o=(16777215&n).toString(16).toUpperCase(),i="00000".substring(0,6-o.length)+o,a=new(U())("#"+i).hsl(),u=a.hue(),l=new(U())({h:u,s:a.saturationl(),l:90}),c={color:new(U())({h:u,s:a.saturationl(),l:40}).string(),backgroundColor:l.string()};return q[e]=c,c}function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z.apply(this,arguments)}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==J(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===J(o)?o:String(o)),n)}var o}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}function $(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(u,t);var r,n,o,i,a=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Y(o);if(i){var r=Y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={value:t.props.value||"",configs:t.props.configs||new Map,getRealValue:function(){var e=t.props,r=e.node,n=e.column;return r.getMetadata().get(n.name)}},t}return r=u,n=[{key:"updateValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState({value:e});var r=this.props,n=r.fieldname,o=r.onChange,i=r.onValueChange;if(o){var a={};a["ajxp_meta_"+n]=e,o(a,t)}else this.props.onValueChange&&i(n,e,t)}},{key:"componentDidMount",value:function(){var e=this;this.props.configs||b.getInstance().loadConfigs().then((function(t){e.setState({configs:t})}))}},{key:"componentWillReceiveProps",value:function(e,t){this.setState({value:e.value||""})}},{key:"render",value:function(){return l().createElement(e,z({},this.props,this.state,{updateValue:this.updateValue.bind(this)}))}}],n&&K(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}(l().Component)}const G=require("material-ui/styles");function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t,r){return(t=re(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,re(n.key),n)}}function re(e){var t=function(e,t){if("object"!==Q(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Q(t)?t:String(t)}function ne(e,t){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ne(e,t)}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}var ie=n().requireLib("hoc").ThemedModernStyles,ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=oe(n);if(o){var r=oe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this.props,t=e.updateValue,r=e.value,n=void 0===r?0:r,o=e.search,i=e.label,a=e.muiTheme,u=ie(a),c=[-1,0,1,2,3,4].map((function(e){var r="star"+(-1===e?"-off":n>e?"":"-outline"),o=-1===e?{marginRight:5,cursor:"pointer"}:{cursor:"pointer"};return l().createElement("span",{key:"star-"+e,onClick:function(){return t(e+1,!0)},className:"mdi mdi-"+r,style:o})}));return o?l().createElement("div",{className:"advanced-search-stars",style:Z(Z({},u.div),k)},l().createElement("div",null,c)):l().createElement("div",{style:Z(Z({},u.textFieldV2.style),{},{borderBottom:u.fillBlockV2Right.borderBottom,marginBottom:6})},l().createElement("div",{style:{color:a.palette.mui3["on-surface-variant"],fontSize:12,padding:"3px 8px 0",lineHeight:"16px"}},i),l().createElement("div",{style:Z(Z({},k),{},{paddingLeft:6})},c))}}])&&te(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(l().Component);const ue=$((0,G.muiThemeable)()(ae));function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function ce(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?se(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==le(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===le(o)?o:String(o)),n)}var o}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}var de=n().requireLib("hoc").ModernSelectField;const me=$(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ye(n);if(o){var r=ye(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={},t}return t=a,(r=[{key:"changeSelector",value:function(e,t,r){this.props.updateValue(r,!0)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.itemsLoader;t&&t((function(t,r,n){e.setState({menuItems:t,keys:r,stepper:n})}))}},{key:"next",value:function(){}},{key:"render",value:function(){var e,t=this.state,r=t.stepper,n=t.keys,o=void 0===n?[]:n,i=this.props,a=i.value,u=i.label,s=i.updateValue,f=i.search;return(e=void 0===this.state.menuItems?ce(this.props.menuItems):ce(this.state.menuItems)).unshift(l().createElement(c.MenuItem,{value:"",primaryText:""})),l().createElement("div",{style:{display:"flex"}},r&&!f&&l().createElement("div",null,l().createElement(c.IconButton,{iconClassName:"mdi mdi-chevron-left",tooltip:"Previous Step",onClick:function(){return s(o[o.indexOf(a)-1],!0)},disabled:o.indexOf(a)<=0,style:{width:28,padding:"12px 0"}})),l().createElement("div",{style:{flex:1,maxWidth:r&&!f?"75%":null}},l().createElement(de,{variant:f?"v1":"v2",fullWidth:!0,value:a,hintText:u,onChange:this.changeSelector.bind(this)},e)),r&&!f&&l().createElement("div",null,l().createElement(c.IconButton,{iconClassName:"mdi mdi-chevron-right",tooltip:"Next Step",onClick:function(){return s(o[o.indexOf(a)+1],!0)},disabled:o.indexOf(a)>=o.length-1,style:{width:28,padding:"12px 0"}})))}}])&&fe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(l().Component)),be=require("pydio/util/lang");var ve=e.n(be);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ge.apply(this,arguments)}function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function je(e,t,r){return(t=Pe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pe(n.key),n)}}function Pe(e){var t=function(e,t){if("object"!==he(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==he(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===he(t)?t:String(t)}function Ee(e,t){return Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ee(e,t)}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}var ke=n().requireLib("hoc"),xe=ke.ThemedModernStyles,Ce=ke.ModernAutoComplete,Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}(u,e);var t,r,o,i,a=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Te(o);if(i){var r=Te(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var r=(t=a.call(this,e)).props,n=r.node,o=r.value,i=r.column;return t.state={loading:!1,dataSource:[],tags:n?n.getMetadata().get(i.name):o,searchText:""},t}return t=u,(r=[{key:"componentDidMount",value:function(){this.getRealValue(),this.props.editMode&&this.load()}},{key:"componentWillReceiveProps",value:function(e){var t=e.node,r=e.value,n=e.column;t?this.setState({tags:t.getMetadata().get(n.name)}):r?this.setState({tags:r}):this.setState({tags:""}),e.editMode&&!this.state.loaded&&this.load()}},{key:"getRealValue",value:function(){var e=this.props,t=e.node,r=e.value,n=e.column;null==t?this.setState({tags:r}):this.setState({tags:t.getMetadata().get(n.name)})}},{key:"suggestionLoader",value:function(e){var t=this;this.setState({loading:this.state.loading+1}),b.getInstance().listTags(this.props.fieldname||this.props.column.name).then((function(r){t.setState({loading:t.state.loading-1}),e(r)}))}},{key:"load",value:function(){this.setState({loading:!0}),this.suggestionLoader(function(e){var t=e.filter((function(e){return!!e})).map((function(e){return{value:l().createElement(c.MenuItem,{innerDivStyle:{paddingLeft:0,marginLeft:0},style:we({margin:"5px 10px",fontSize:14,fontWeight:500,paddingLeft:10,borderRadius:4},W(e))},l().createElement("span",{className:"mdi mdi-label-outline",style:{marginRight:5}}),e),text:e}}));this.setState({dataSource:t,loading:!1,loaded:!0})}.bind(this))}},{key:"handleRequestDelete",value:function(e){var t=this,r=this.props.updateValue,n=this.state.tags.split(","),o=n.indexOf(e);n.splice(o,1),this.setState({tags:n.toString()},(function(){r(t.state.tags,!0)}))}},{key:"handleUpdateInput",value:function(e){this.setState({searchText:e})}},{key:"handleNewRequest",value:function(){var e=this,t=this.state,r=t.searchText,n=t.tags;if(r){var o=[];n&&n.split&&(o=n.split(",")),o.indexOf(r)>-1?this.setState({searchText:""}):(o.push(r),this.setState({searchText:"",tags:o.toString()},(function(){(0,e.props.updateValue)(e.state.tags,!0)})))}}},{key:"renderChip",value:function(e){var t=W(e),r=t.color,n=t.backgroundColor,o={margin:2,borderRadius:"4px 16px 16px 4px"},i={color:r,fontWeight:500,paddingLeft:10,paddingRight:16};return this.props.editMode?l().createElement(c.Chip,{key:e,backgroundColor:n,labelStyle:i,style:o,onRequestDelete:this.handleRequestDelete.bind(this,e)},e):l().createElement(c.Chip,{key:e,backgroundColor:n,labelStyle:i,style:o},e)}},{key:"render",value:function(){var e,t,r=this,o=this.props,i=o.editMode,a=o.search,u=o.label,s=o.muiTheme,f=this.state,p=f.tags,y=f.searchText,d=[];p&&p.split&&(e=(d=p.split(",").map((function(e){return ve().trim(e," ")})).filter((function(e){return!!e}))).map((function(e){return r.renderChip(e)})));var m=xe(s);if(i){var b=a?c.AutoComplete:Ce,v=a?we({style:{marginBottom:-10}},m.textField):{hintText:u};t=l().createElement(b,ge({fullWidth:!0,hintText:n().getMessages()["meta.user.10"],searchText:y,onUpdateInput:this.handleUpdateInput.bind(this),onNewRequest:this.handleNewRequest.bind(this),dataSource:this.state.dataSource,filter:function(e,t){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1===d.indexOf(t)},openOnFocus:!0,menuProps:{maxHeight:200,desktop:!0},listStyle:{paddingTop:5,paddingBottom:5},onClose:function(){y&&r.handleNewRequest()}},v))}else t=l().createElement("div",null);return l().createElement("div",{style:a?{marginBottom:8}:{}},t,e&&l().createElement("div",{style:{display:"flex",flexWrap:"wrap",zoom:.8,marginTop:a?8:0}},e))}}])&&Se(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(l().Component);const Re=$((0,G.muiThemeable)()(Me));function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function De(){return De=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},De.apply(this,arguments)}function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){Be(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Be(e,t,r){return(t=Fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fe(n.key),n)}}function Le(e,t,r){return t&&Ve(e.prototype,t),r&&Ve(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fe(e){var t=function(e,t){if("object"!==_e(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===_e(t)?t:String(t)}function Ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qe(e,t)}function qe(e,t){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qe(e,t)}function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Je(e);if(t){var o=Je(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Je(e){return Je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Je(e)}var ze=n().requireLib("hoc"),Ke=ze.ModernTextField,He=ze.ModernSelectField,Ye=ze.ThemedModernStyles,$e=ze.DatePicker,Ge=ze.TimePicker,Qe=n().requireLib("boot").moment,Xe=function(e){Ue(r,e);var t=We(r);function r(){return Ae(this,r),t.apply(this,arguments)}return Le(r,[{key:"render",value:function(){var e=this.props,t=e.getRealValue,r=e.configs,n=e.column,o=r.get(n.name),i="date",a="normal";o&&o.data&&(i=o.data.format||i,a=o.data.display||a);var c=t(),s=new Date(1e3*parseFloat(c));if(isNaN(s.getTime()))return l().createElement(u.Fragment,null,"[Invalid Date]");var f=new Qe(s);if("relative"===a)return l().createElement(u.Fragment,null,f.fromNow());switch(i){case"date":return l().createElement(u.Fragment,null,f.format("ll"));case"date-time":default:return l().createElement(u.Fragment,null,f.format("llll"));case"time":return l().createElement(u.Fragment,null,f.format("LT"))}}}]),r}(u.Component);Xe=j((0,G.muiThemeable)()(Xe));var Ze=function(e){Ue(r,e);var t=We(r);function r(e){var n;return Ae(this,r),(n=t.call(this,e)).state={},n}return Le(r,[{key:"configAsState",value:function(e,t){e.has(t)&&this.setState(e.get(t).data)}},{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.fieldname,n=t.configs;n?this.configAsState(n,r):b.getInstance().loadConfigs().then((function(t){return e.configAsState(t,r)}))}},{key:"getDate",value:function(){var e,t=this.props.value,r="";if(!t)return{vDate:null,searchComp:r};t.indexOf&&["<",">"].indexOf(t.charAt(0))>-1?(r=t.charAt(0),"="===t.charAt(1)?(r+="=",e=parseFloat(t.substr(2))):e=parseFloat(t.substr(1))):e=parseFloat(t);var n=new Date(1e3*parseFloat(e));return isNaN(n.getTime())?{vDate:new Date(0),searchComp:r}:{vDate:n,searchComp:r}}},{key:"clear",value:function(){(0,this.props.updateValue)("")}},{key:"updateDate",value:function(e,t){var r=this.props,n=r.updateValue,o=r.search,i=this.getDate(),a=i.vDate,u=i.searchComp;a||(a=new Date(0)),"date-time"===t?(e.setHours(a.getHours()),e.setMinutes(a.getMinutes()),e.setSeconds(a.getSeconds())):(e.setHours(0),e.setMinutes(0),e.setSeconds(0)),n(o?u+""+parseInt(e/1e3):parseInt(e/1e3))}},{key:"updateTime",value:function(e){var t=this.props,r=t.updateValue,n=t.search,o=this.getDate(),i=o.vDate,a=o.searchComp;i||(i=new Date(0)),i.setHours(e.getHours()),i.setMinutes(e.getMinutes()),i.setSeconds(e.getSeconds()),r(n?a+""+parseInt(i/1e3):parseInt(i/1e3))}},{key:"updateComp",value:function(e){var t=this.props.updateValue,r=this.getDate().vDate;r||(r=new Date),t(e+""+parseInt(r/1e3))}},{key:"render",value:function(){var e=this,t=this.props,r=t.supportTemplates,n=t.search,o=t.updateValue,i=t.value,a=t.label,u=t.muiTheme,s=Ye(u);if(r)return l().createElement(Ke,{value:i,fullWidth:!0,hintText:a,onChange:function(e,t){o(t)}});var f=this.state.format,p=void 0===f?"date":f,y=this.getDate(),d=y.vDate,m=y.searchComp,b=[];n&&b.push(l().createElement("div",{style:{width:60,marginRight:8}},l().createElement(He,{fullWidth:!0,value:m,onChange:function(t,r,n){return e.updateComp(n)}},l().createElement(c.MenuItem,{value:"",primaryText:"="}),l().createElement(c.MenuItem,{value:">=",primaryText:">="}),l().createElement(c.MenuItem,{value:"<=",primaryText:"<="}),l().createElement(c.MenuItem,{value:">",primaryText:">"}),l().createElement(c.MenuItem,{value:"<",primaryText:"<"}))));var v=n?Ne({},s.textField):Ne(Ne({},s.textFieldV2),{},{textFieldStyle:{height:52}});return"date"!==p&&"date-time"!==p||b.push(l().createElement("div",{style:{flex:3}},l().createElement($e,De({floatingLabelText:n?null:a+" (date)",hintText:n?"Date":null},v,{container:"inline",fullWidth:!0,value:d,onChange:function(t,r){return e.updateDate(r,p)},autoOk:"date"===p})))),"date-time"===p&&b.push(l().createElement("div",{style:{width:8}})),"time"!==p&&"date-time"!==p||b.push(l().createElement("div",{style:{flex:2}},l().createElement(Ge,De({floatingLabelText:n?null:a+" (time)",hintText:n?"Time":null},v,{dialogStyle:{zIndex:5e3},fullWidth:!0,value:d,onChange:function(t,r){return e.updateTime(r)},autoOk:"time"===p})))),!n&&d&&b.push(l().createElement("div",{style:Ne(Ne({cursor:"pointer"},s.fillBlockV2Right),{},{paddingTop:22,paddingRight:8}),onClick:function(){return e.clear()}},l().createElement(c.FontIcon,{className:"mdi mdi-close",color:"rgba(0,0,0,.5)"}))),l().createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:n?null:6}},b)}}]),r}(u.Component);function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(){return tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tt.apply(this,arguments)}function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){ot(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ot(e,t,r){return(t=at(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function it(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,at(n.key),n)}}function at(e){var t=function(e,t){if("object"!==et(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===et(t)?t:String(t)}function ut(e,t){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ut(e,t)}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}Ze=$((0,G.muiThemeable)()(Ze));var ct=Pydio.requireLib("hoc").ThemedModernStyles,st=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ut(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=lt(n);if(o){var r=lt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this.props,t=e.updateValue,r=e.value,n=e.search,o=e.muiTheme,i=ct(o),a=nt({},i.toggleField),u=r?"Yes":"No";n||(a=nt({},i.toggleFieldV2),u=this.props.label+" ("+u+")");var s=l().createElement(c.Toggle,tt({toggled:r,onToggle:function(e,r){t(r)},label:u,labelPosition:"right"},a));return n?s:l().createElement("div",{style:{margin:"12px 0 6px"}},s)}}])&&it(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(l().Component);const ft=$((0,G.muiThemeable)()(st));function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==pt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===pt(o)?o:String(o)),n)}var o}function mt(e,t,r){return t&&dt(e.prototype,t),r&&dt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}function vt(e,t){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vt(e,t)}function ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=gt(e);if(t){var o=gt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function gt(e){return gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gt(e)}var Ot=n().requireLib("form").InputIntegerBytes,wt=n().requireLib("hoc"),jt=wt.ModernTextField,St=wt.ModernSelectField,Pt=function(e){bt(r,e);var t=ht(r);function r(){return yt(this,r),t.apply(this,arguments)}return mt(r,[{key:"render",value:function(){var e=this.props,t=e.getRealValue,r=e.configs,n=e.column,o=e.inline,i=r.get(n.name),a="general";i&&i.data&&(a=i.data.format||a);var s=t();switch(a){case"bytesize":return l().createElement(Ot,{value:s,editMode:!1,displayContext:"grid",toggleEditMode:function(){},disabled:!0});case"percentage":return l().createElement(u.Fragment,null,s,"%");case"progress":return o?l().createElement(c.LinearProgress,{value:s,max:100,mode:"determinate",style:{display:"inline-block",width:60,height:6,backgroundColor:"rgba(189,189,189,.5)"}}):l().createElement("div",{style:{display:"flex",alignItems:"center"}},l().createElement(c.LinearProgress,{value:s,max:100,mode:"determinate",style:{flex:1}}),l().createElement("div",{style:{marginLeft:5}},s,"%"));default:return l().createElement(u.Fragment,null,s)}}}]),r}(l().Component);Pt=j(Pt);var Et=function(e){bt(r,e);var t=ht(r);function r(e){var n;return yt(this,r),(n=t.call(this,e)).state={},n}return mt(r,[{key:"configAsState",value:function(e,t){e.has(t)&&this.setState(e.get(t).data)}},{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.fieldname,n=t.configs;n?this.configAsState(n,r):b.getInstance().loadConfigs().then((function(t){return e.configAsState(t,r)}))}},{key:"render",value:function(){var e=this.props,t=e.supportTemplates,r=e.search,n=e.updateValue,o=e.label,i=function(e){n(e,!1)},a=this.state.format,u=void 0===a?"general":a,s=this.props.value,f="";r&&(s.indexOf&&["<",">"].indexOf(s.charAt(0))>-1?(f=s.charAt(0),"="===s.charAt(1)?(f+="=",s=parseInt(s.substr(2))):s=parseInt(s.substr(1))):s=parseInt(s));var p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l().createElement(jt,{value:s,fullWidth:!0,hintText:o,type:e,onChange:t,underlineShow:!n,variant:r?"v1":"v2"})};if(t)return p("",(function(e,t){return i(t)}));if(r)return l().createElement("div",{style:{display:"flex"}},l().createElement("div",{style:{width:60,marginRight:8}},l().createElement(St,{fullWidth:!0,value:f,onChange:function(e,t,r){return i(r+""+s)}},l().createElement(c.MenuItem,{value:"",primaryText:"="}),l().createElement(c.MenuItem,{value:">=",primaryText:">="}),l().createElement(c.MenuItem,{value:"<=",primaryText:"<="}),l().createElement(c.MenuItem,{value:">",primaryText:">"}),l().createElement(c.MenuItem,{value:"<",primaryText:"<"}))),l().createElement("div",{style:{flex:1}},p("number",(function(e,t){i(t?f+""+t:t)}))));var y="number";switch(u){case"general":default:return p(y,(function(e,t){return i(parseInt(t))}));case"percentage":return p(y,(function(e,t){i(Math.max(0,Math.min(100,t)))}));case"progress":return l().createElement("div",null,p(y,(function(e,t){i(Math.max(0,Math.min(100,t)))}),!0),l().createElement(c.LinearProgress,{mode:"determinate",max:100,value:s,style:{marginTop:-8}}));case"bytesize":var d=function(){};return l().createElement(Ot,{value:s,editMode:!0,onChange:function(e,t){return i(parseInt(e))},isDisplayGrid:d,isDisplayForm:d,toggleEditMode:d,attributes:{type:"integer-bytes",label:o},variant:r?"v1":"v2"})}}}]),r}(l().Component);function Tt(e){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tt(e)}function kt(){return kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kt.apply(this,arguments)}function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){Mt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mt(e,t,r){return(t=_t(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_t(n.key),n)}}function _t(e){var t=function(e,t){if("object"!==Tt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Tt(t)?t:String(t)}Et=$(Et);var Dt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"renderStars",value:function(e,t){return e.getMetadata().get(t.name)?l().createElement(x,{node:e,column:t,size:"small"}):null}},{key:"renderBoolean",value:function(e,t){return e.getMetadata().get(t.name)?l().createElement("span",null,l().createElement("span",{className:"mdi mdi-check",style:{color:"#4caf50"}})," ",t.label):null}},{key:"renderSelector",value:function(e,t){return e.getMetadata().get(t.name)?l().createElement(D,{node:e,column:t}):null}},{key:"renderCSSLabel",value:function(e,t){return e.getMetadata().get(t.name)?l().createElement(L,{node:e,column:t}):null}},{key:"renderTagsCloud",value:function(e,t){if(!e.getMetadata().get(t.name))return null;var r={display:"inline-block",backgroundColor:"#E1BEE7",borderRadius:6,height:22,lineHeight:"22px",padding:"0 6px",color:"#9C27B0",fontWeight:500,fontSize:12,marginLeft:2,marginRight:6},n=e.getMetadata().get(t.name);return n&&n.split?l().createElement("span",null,n.split(",").map((function(e,t){var o=Ct(Ct({},r),W(e));return t===n.split(",").length-1&&(o=Ct(Ct({},o),{},{marginRight:-4})),l().createElement("span",{style:o},e)}))):null}},{key:"renderDate",value:function(e,t){return e.getMetadata().get(t.name)?l().createElement(Xe,{node:e,column:t,type:"date"}):null}},{key:"renderInteger",value:function(e,t){return e.getMetadata().get(t.name)?l().createElement(Pt,{node:e,column:t,inline:!0}):null}},{key:"formPanelStars",value:function(e){return l().createElement(ue,kt({},e,{search:!0}))}},{key:"formPanelCssLabels",value:function(e,t){var r=Object.keys(V()).map(function(e){var t=V()[e],r=l().createElement("span",null,l().createElement("span",{className:"mdi mdi-label",style:{color:t.color,marginRight:5}}),t.label);return l().createElement(c.MenuItem,{value:e,primaryText:r})}.bind(this));return l().createElement(me,kt({},e,{menuItems:r,search:!t}))}},{key:"formPanelSelectorFilter",value:function(e,t){var r=function(t,r){var n,o=t.get(e.fieldname),i=[],a=[];o&&o.data&&o.data.items&&(i=o.data.items.map((function(e){a.push(e.key);var t=e.value;return e.color&&(t=l().createElement("span",null,l().createElement("span",{className:"mdi mdi-label",style:{color:e.color,marginRight:5}}),e.value)),l().createElement(c.MenuItem,{value:e.key,primaryText:t})}))),o&&o.data&&o.data.steps&&(n=!0),r(i,a,n)};return l().createElement(me,kt({},e,{menuItems:[],itemsLoader:function(e){t?r(t,e):b.getInstance().loadConfigs().then((function(t){return r(t,e)}))},search:!t}))}},{key:"formPanelTags",value:function(e,t){return l().createElement(Re,kt({},e,{editMode:!0,search:!t}))}},{key:"formPanelDate",value:function(e){return l().createElement(Ze,kt({type:"date"},e,{editMode:!0,search:!0}))}},{key:"formPanelBoolean",value:function(e){return l().createElement(ft,kt({},e,{search:!0}))}},{key:"formPanelInteger",value:function(e){return l().createElement(Et,kt({},e,{search:!0}))}},{key:"typeFormRenderer",value:function(t){switch(t){case"stars_rate":return e.formPanelStars;case"css_label":return e.formPanelCssLabels;case"choice":return e.formPanelSelectorFilter;case"tags":return e.formPanelTags;case"integer":return e.formPanelInteger;case"boolean":return e.formPanelBoolean;case"date":return e.formPanelDate;default:return null}}},{key:"typeColumnRenderer",value:function(t){var r;switch(t){case"stars_rate":r={renderComponent:e.renderStars,sortType:"number"};break;case"css_label":r={renderComponent:e.renderCSSLabel,sortType:"string"};break;case"choice":r={renderComponent:e.renderSelector,sortType:"string"};break;case"tags":r={renderComponent:e.renderTagsCloud,renderBlock:!0,sortType:"string"};break;case"integer":r={renderComponent:e.renderInteger,sortType:"number"};break;case"boolean":r={renderComponent:e.renderBoolean,sortType:"number"};break;case"date":r={renderComponent:e.renderDate,sortType:"number"};break;default:return{}}return r.renderComponent&&(r.renderCell=r.renderComponent),r}}],null&&Rt(t.prototype,null),r&&Rt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(r),!0).forEach((function(t){At(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function At(e,t,r){return(t=Ft(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vt.apply(this,arguments)}function Lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ft(n.key),n)}}function Ft(e){var t=function(e,t){if("object"!==It(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==It(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===It(t)?t:String(t)}function Ut(e,t){return Ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ut(e,t)}function qt(e){return qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qt(e)}var Wt=n().requireLib("hoc").ModernTextField,Jt=n().requireLib("components").EmptyStateView,zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ut(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qt(n);if(o){var r=qt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===It(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),void 0===e.editMode&&(e.editMode=!1),(t=i.call(this,e)).state={updateMeta:new Map,fields:{},configs:new Map},t}return t=a,r=[{key:"componentDidMount",value:function(){var e=this;(this.props.loader?this.props.loader():b.getInstance().loadConfigs()).then((function(t){var r=e.props,n=r.node,o=r.loadChecks,i={},a=new Map;o&&t.forEach((function(e,t){n.getMetadata().has(t)&&(i[t]=!0,a.set(t,n.getMetadata().get(t)))})),e.setState({configs:t,fields:i,updateMeta:a})}))}},{key:"updateValue",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.state.updateMeta.set(e,t),this.setState({updateMeta:this.state.updateMeta}),this.props.onChangeUpdateData&&this.props.onChangeUpdateData(this.state.updateMeta),r&&this.props.autoSave&&this.props.autoSave()}},{key:"deleteValue",value:function(e){this.state.updateMeta.delete(e),this.setState({updateMeta:this.state.updateMeta}),this.props.onChangeUpdateData&&this.props.onChangeUpdateData(this.state.updateMeta)}},{key:"getUpdateData",value:function(){return this.state.updateMeta}},{key:"resetUpdateData",value:function(){this.setState({updateMeta:new Map}),this.props.onChangeUpdateData&&this.props.onChangeUpdateData(new Map)}},{key:"onCheck",value:function(e,t){var r=this.state.fields;r[e]=t,t||this.deleteValue(e),this.setState({fields:r})}},{key:"render",value:function(){var e=this,t=this.state,r=t.configs,n=t.updateMeta,o=this.props,i=o.pydio,a=o.node,u=o.editMode,s=o.onRequestEditMode,f=o.supportTemplates,p=o.multiple,y=o.style,d=[],m=a.getMetadata(),b=0;r.forEach((function(t,o){var i,s=t.label,y=t.type,v=t.readonly;if("json"!==y||f){i=m.get(o),n.has(o)&&(i=n.get(o));var h=i;if(u&&!v){var g,O={fieldname:o,label:s,value:i,configs:r,onValueChange:function(t,r,n){return e.updateValue(t,r,n)}};switch(y){case"stars_rate":g=l().createElement(ue,O);break;case"choice":g=Dt.formPanelSelectorFilter(O,r);break;case"css_label":g=Dt.formPanelCssLabels(O,r);break;case"tags":g=Dt.formPanelTags(O,r);break;case"date":g=l().createElement(Ze,Vt({type:y},O,{supportTemplates:f}));break;case"integer":g=l().createElement(Et,Vt({},O,{supportTemplates:f}));break;case"boolean":g=l().createElement(ft,O);break;default:var w="integer"===y&&!f;g=l().createElement(Wt,{value:i||"",variant:"v2",fullWidth:!0,disabled:v,floatingLabelText:s,multiLine:"textarea"===y||"json"===y,type:w?"number":null,onChange:function(t,r){w&&(r=parseInt(r)),e.updateValue(o,r)},onKeyPress:function(t){"Enter"===t.key&&e.updateValue(o,i,!0)}})}if(p){var j=e.state.fields[o]||!1;d.push(l().createElement("div",{className:"infoPanelRow",key:o,style:{marginBottom:20}},l().createElement(c.Checkbox,{checked:j,label:s,onCheck:function(t,r){return e.onCheck(o,r)}}),j&&l().createElement("div",{className:"infoPanelValue"},g)))}else d.push(l().createElement("div",{key:o},g))}else{var S={name:o};switch(y){case"stars_rate":i=l().createElement(x,{node:a,column:S});break;case"choice":i=l().createElement(D,{node:a,column:S});break;case"css_label":i=l().createElement(L,{node:a,column:S});break;case"tags":i=l().createElement(Re,{node:a,column:S});break;case"date":i=l().createElement(Xe,{node:a,column:S,type:y});break;case"integer":i=l().createElement(Pt,{node:a,column:S});break;case"boolean":h=i=i?"Yes":"No"}h&&b++,d.push(l().createElement("div",{className:"infoPanelRow"+(h?"":" no-value"),key:o},l().createElement("div",{className:"infoPanelLabel"},s),l().createElement("div",{className:"infoPanelValue"},i)))}}}));var v,h=i.MessageHash;if(u||b)return p&&(v=l().createElement("div",{style:{paddingBottom:16}},l().createElement("em",null,h["meta.user.12"])," ",h["meta.user.13"])),l().createElement("div",{style:Bt({width:"100%",overflowY:"scroll"},y)},v,d);var g={};return s&&(g={onClick:s,style:{cursor:"pointer"}}),l().createElement("div",g,l().createElement(Jt,{pydio:this.props.pydio,iconClassName:"mdi mdi-tag-outline",primaryTextId:h["meta.user."+(s?"11":"16")],style:{padding:"10px 40px 20px",backgroundColor:"transparent"},iconStyle:{fontSize:40},legendStyle:{fontSize:13}}))}}],r&&Lt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(l().Component);function Kt(e){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kt(e)}function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){$t(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $t(e,t,r){return(t=Qt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qt(n.key),n)}}function Qt(e){var t=function(e,t){if("object"!==Kt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Kt(t)?t:String(t)}function Xt(e,t){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xt(e,t)}function Zt(e){return Zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zt(e)}var er=n().requireLib("workspaces").InfoPanelCard,tr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Zt(n);if(o){var r=Zt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Kt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={},t._nodeObserver=function(){t.refs.panel&&t.refs.panel.resetUpdateData(),t.forceUpdate()},e.node&&e.node.observe("node_replaced",t._nodeObserver),t}return t=a,(r=[{key:"componentWillReceiveProps",value:function(e){this.props.node&&this.props.node.stopObserving("node_replaced",this._nodeObserver),e.node!==this.props.node&&this.refs.panel&&e.node.observe("node_replaced",this._nodeObserver)}},{key:"componentWillUnmount",value:function(){this.props.node&&this.props.node.stopObserving("node_replaced",this._nodeObserver)}},{key:"saveMeta",value:function(){var e=this.refs.panel.getUpdateData();return b.getInstance().saveMeta(this.props.pydio.getContextHolder().getSelectedNodes(),e)}},{key:"onChangeUpdateData",value:function(e){this.setState({updateData:e})}},{key:"render",value:function(){var e=this,t=[],r=this.props,n=r.pydio,o=r.node,i=r.popoverPanel,a=n.MessageHash,u=this.state.updateData||new Map,s="true"===o.getMetadata().get("node_readonly"),f=!1;!s&&u.size>0&&(f=!0,t.push(l().createElement(c.FlatButton,{key:"edit",label:a["meta.user.15"],onClick:function(){e.saveMeta()}})));var p={};return i&&(p=Yt(Yt({},p),{},{maxHeight:"80vh",overflowY:"auto"})),f||(p=Yt(Yt({},p),{},{paddingBottom:16})),l().createElement(er,{identifier:"meta-user",style:this.props.style,title:this.props.pydio.MessageHash["meta.user.1"],actions:t.length?t:null,icon:"tag-multiple",iconColor:"#00ACC1",popoverPanel:i},l().createElement(zt,{ref:"panel",node:this.props.node,editMode:!s,pydio:this.props.pydio,onChangeUpdateData:function(t){e.onChangeUpdateData(t)},autoSave:function(){e.saveMeta()},style:p}))}}])&&Gt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(l().Component);const rr=require("pydio/model/node");var nr=e.n(rr);const or=require("pydio/model/data-model");var ir=e.n(or);const ar=require("create-react-class");var ur=e.n(ar);const lr=require("prop-types");var cr=e.n(lr),sr=n().requireLib("boot"),fr=sr.ActionDialogMixin,pr=sr.CancelButtonProviderMixin,yr=sr.SubmitButtonProviderMixin;const dr=ur()({displayName:"UserMetaDialog",propsTypes:{selection:cr().instanceOf(ir())},mixins:[fr,pr,yr],saveMeta:function(){var e=this.refs.panel.getUpdateData(),t={};return e.forEach((function(e,r){t[r]=e})),b.getInstance().saveMeta(this.props.selection.getSelectedNodes(),e)},submit:function(){var e=this;this.saveMeta().then((function(){e.dismiss()}))},render:function(){return l().createElement(zt,{pydio:this.props.pydio,multiple:!this.props.selection.isUnique(),ref:"panel",node:this.props.selection.isUnique()?this.props.selection.getUniqueNode():new(nr()),editMode:!0})}});function mr(e){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mr(e)}function br(){return br=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},br.apply(this,arguments)}function vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==mr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===mr(o)?o:String(o)),n)}var o}function hr(e,t){return hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hr(e,t)}function gr(e){return gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gr(e)}var Or=Pydio.requireLib("hoc"),wr=Or.ModernSelectField,jr=Or.ModernTextField,Sr=Or.ThemedModernStyles,Pr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gr(n);if(o){var r=gr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===mr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={},t}return t=a,r=[{key:"addSelectionValue",value:function(){var e=this.state,t=e.selectorNewKey,r=e.selectorNewValue,n=e.selectorNewColor,o=this.props,i=o.data,a=o.setAdditionalDataKey,u=i.items,l=void 0===u?[]:u;l.push({key:t,value:r,color:n}),a("items",l),this.setState({selectorNewKey:"",selectorNewValue:"",selectorNewColor:""})}},{key:"removeSelectionValue",value:function(e){var t=this.props,r=t.data,n=t.setAdditionalDataKey,o=r.items;n("items",(void 0===o?[]:o).filter((function(t){return t.key!==e})))}},{key:"renderColor",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r?l().createElement("span",{className:"mdi mdi-label"+(t?"":"-outline"),style:{color:t||"#ccc",marginRight:5}}):l().createElement("span",{style:{width:60,marginRight:6}},l().createElement(wr,{disabled:r,fullWidth:!0,value:t,onChange:function(t,r,n){e.setState({selectorNewColor:n})}},l().createElement(c.MenuItem,{value:"",primaryText:l().createElement("span",{className:"mdi mdi-label-outline",style:{color:"#ccc"}})}),["#9c27b0","#607d8b","#66c","#69c","#6c6","#696","#c96","#ff9800","#c66","#fff","#ccc","#999","#000"].map((function(e){return l().createElement(c.MenuItem,{value:e,primaryText:l().createElement("span",{className:"mdi mdi-label",style:{color:e}})})}))))}},{key:"render",value:function(){var e=this,t=this.props,r=t.data,n=t.m,o=t.setAdditionalDataKey,i=t.muiTheme,a=this.state,s=a.selectorNewKey,f=a.selectorNewValue,p=a.selectorNewColor,y=r.items,d=void 0===y?[]:y,m=Sr(i);return l().createElement(u.Fragment,null,l().createElement("div",{style:{padding:10,paddingRight:0,backgroundColor:"#f5f5f5",borderRadius:3}},l().createElement("div",{style:{fontSize:13}},n("editor.selection")),l().createElement("div",null,d.map((function(t){var r=t.key,n=t.value,o=t.color;return l().createElement("div",{key:r,style:{display:"flex",alignItems:"center"}},e.renderColor(o,!0),l().createElement("span",{style:{marginRight:6,width:80}},l().createElement(jr,{value:r,disabled:!0,fullWidth:!0})),l().createElement("span",{style:{flex:1}},l().createElement(jr,{value:n,disabled:!0,fullWidth:!0})),l().createElement("span",null,l().createElement(c.IconButton,{iconClassName:"mdi mdi-delete",iconStyle:{color:"rgba(0,0,0,.3)"},onClick:function(){e.removeSelectionValue(r)}})))}))),l().createElement("div",{style:{display:"flex"},key:"new-selection-key"},this.renderColor(p),l().createElement("span",{style:{width:80,marginRight:6}},l().createElement(jr,{value:s,onChange:function(t,r){e.setState({selectorNewKey:r})},hintText:n("editor.selection.key"),fullWidth:!0})),l().createElement("span",{style:{flex:1}},l().createElement(jr,{value:f,onChange:function(t,r){e.setState({selectorNewValue:r})},hintText:n("editor.selection.value"),fullWidth:!0})),l().createElement("span",null,l().createElement(c.IconButton,{iconClassName:"mdi mdi-plus",onClick:function(){e.addSelectionValue()},disabled:!s||!f})))),l().createElement("div",null,l().createElement(c.Toggle,br({label:n("editor.selection.steps"),labelPosition:"left",toggled:r.steps,onToggle:function(e,t){return o("steps",t)}},m.toggleFieldV2))))}}],r&&vr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(l().Component);const Er=Pr=(0,G.muiThemeable)()(Pr);function Tr(e){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(e)}function kr(){return kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kr.apply(this,arguments)}function xr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(r),!0).forEach((function(t){Mr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mr(e,t,r){return(t=Dr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Dr(n.key),n)}}function Dr(e){var t=function(e,t){if("object"!==Tr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Tr(t)?t:String(t)}function Ir(e,t){return Ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ir(e,t)}function Nr(e){return Nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nr(e)}var Br=n().requireLib("hoc"),Ar=Br.ModernSelectField,Vr=Br.ModernTextField,Lr=Br.ThemedModernStyles,Fr={string:"Text",textarea:"Long Text",integer:"Number",boolean:"Boolean",date:"Date",choice:"Selection",tags:"Extensible Tags",stars_rate:"Stars Rating",css_label:"Color Labels",json:"JSON"},Ur=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ir(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Nr(n);if(o){var r=Nr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Tr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,r=[{key:"updateType",value:function(e){var t=this.props,r=t.namespace,n=t.onChange,o={type:e};"date"===o&&(o.data={format:"date",display:"normal"}),r.JsonDefinition=JSON.stringify(o),n(r)}},{key:"updateLabel",value:function(e){var t=this.props,r=t.create,n=t.namespace,o=t.onChange,i=t.forcePrefix,a=void 0===i?"":i;!r||n.Namespace&&n.Namespace!==a+ve().computeStringSlug(n.Label)||this.updateName(e),n.Label=e,o(n)}},{key:"updateName",value:function(e){var t=this.props,r=t.namespace,n=t.onChange,o=t.forcePrefix,i=ve().computeStringSlug(e);o&&0!==i.indexOf(o)&&(i=o+i),r.Namespace=i,n(r)}},{key:"getAdditionalData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props.namespace;try{var r=JSON.parse(t.JsonDefinition).data||e;return e.items&&r.split?{items:r.split(",").map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Rr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.split("|"),2);return{key:t[0],value:t[1]}}))}:r}catch(e){}return e}},{key:"setAdditionalDataKey",value:function(e,t){var r=this.props,n=r.namespace,o=r.onChange,i=JSON.parse(n.JsonDefinition),a=Mr({},e,t);i.data=Cr(Cr({},i.data),a),n.JsonDefinition=JSON.stringify(i),o(n)}},{key:"render",value:function(){var e=this,t=this.props,r=t.pydio,n=t.create,o=t.namespace,i=t.readonly,a=t.labelError,s=t.nameError,f=t.styles,p=t.metaTypes,y=void 0===p?Fr:p,d=t.showMandatory,m=void 0!==d&&d,b=t.muiTheme,v=Lr(b),h=this.props.m;h||(h=function(e){return r.MessageHash["ajxp_admin.metadata."+e]||e});var g="string";return o.JsonDefinition&&(g=JSON.parse(o.JsonDefinition).type),l().createElement("div",null,l().createElement(Vr,{floatingLabelText:h("label"),value:o.Label,onChange:function(t,r){e.updateLabel(r)},fullWidth:!0,errorText:a,disabled:i,variant:"v2"}),l().createElement(Vr,{floatingLabelText:h("namespace"),disabled:!n,value:o.Namespace,onChange:function(t,r){e.updateName(r)},fullWidth:!0,errorText:s,variant:"v2"}),l().createElement("div",{style:f.section},h("type")),l().createElement(Ar,{hintText:h("type"),value:g,onChange:function(t,r,n){return e.updateType(n)},disabled:i,fullWidth:!0,variant:"v2"},Object.keys(y).map((function(e){return l().createElement(c.MenuItem,{value:e,primaryText:h("type."+e)||y[e]})}))),"choice"===g&&l().createElement(Er,{data:this.getAdditionalData({items:[],steps:!1}),setAdditionalDataKey:this.setAdditionalDataKey.bind(this),m:h}),"date"===g&&l().createElement(u.Fragment,null,l().createElement(Ar,{hintText:h("type.date.format"),value:this.getAdditionalData({format:"date",display:"normal"}).format,onChange:function(t,r,n){return e.setAdditionalDataKey("format",n)},disabled:i,fullWidth:!0,variant:"v2"},l().createElement(c.MenuItem,{value:"date",primaryText:h("type.date.format.date")}),l().createElement(c.MenuItem,{value:"date-time",primaryText:h("type.date.format.date-time")}),l().createElement(c.MenuItem,{value:"time",primaryText:h("type.date.format.time")})),l().createElement(Ar,{hintText:h("type.date.display"),value:this.getAdditionalData({format:"date",display:"normal"}).display,onChange:function(t,r,n){return e.setAdditionalDataKey("display",n)},disabled:i,fullWidth:!0,variant:"v2"},l().createElement(c.MenuItem,{value:"normal",primaryText:h("type.date.display.normal")}),l().createElement(c.MenuItem,{value:"relative",primaryText:h("type.date.display.relative")}))),"integer"===g&&l().createElement(u.Fragment,null,l().createElement(Ar,{hintText:h("type.integer.format"),value:this.getAdditionalData({format:"general"}).format||"general",onChange:function(t,r,n){return e.setAdditionalDataKey("format",n)},disabled:i,fullWidth:!0,variant:"v2"},l().createElement(c.MenuItem,{value:"general",primaryText:h("type.integer.format.general")}),l().createElement(c.MenuItem,{value:"bytesize",primaryText:h("type.integer.format.bytesize")}),l().createElement(c.MenuItem,{value:"percentage",primaryText:h("type.integer.format.percentage")}),l().createElement(c.MenuItem,{value:"progress",primaryText:h("type.integer.format.progress")}))),m&&l().createElement(u.Fragment,null,l().createElement(c.Toggle,kr({},v.toggleFieldV2,{toggled:this.getAdditionalData({mandatory:!1}).mandatory,onToggle:function(t,r){e.setAdditionalDataKey("mandatory",r)},label:h("field.mandatory"),labelPosition:"right"}))))}}],r&&_r(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(l().Component);(Ur=(0,G.muiThemeable)()(Ur)).MetaTypes=Fr;const qr=Ur;window.ReactMeta=t})();